--Anti Cheat Disabler
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()
local Window = Fluent:CreateWindow({
  Title = "ü•ã MTX Client | Blade Ball V2.5 üëë ",
  SubTitle = "metatron_exe | MTX Team",
  TabWidth = 160,
  Size = UDim2.fromOffset(500, 320),
  Acrylic = false, -- The blur may be detectable, setting this to false disables blur entirely
  Theme = "Amethyst",
  MinimizeKey = Enum.KeyCode.G -- Used when theres no MinimizeKeybind
})
local Tabs = {
  P = Window:AddTab({ Title = "Auto Parry", Icon = "moon" }),
  Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}
local Options = Fluent.Options
InterfaceManager:SetLibrary(Fluent)
InterfaceManager:SetFolder("FluentScriptHub")
InterfaceManager:BuildInterfaceSection(Tabs.Settings)
Window:SelectTab(1)
Fluent:Notify({
  Title = "MTX Client ‚ùï",
  Content = "Script Caregado...",
  SubContent = "AntiCheat Bypass Actived ‚ò†", -- Optional
  Duration = 5 -- Set to nil to make the notification not disappear
})
-- Botao Para mobile suport
local CheckMobile = function()
  if
      game:GetService("UserInputService").TouchEnabled
   then
      return true 
  end
end 
IsMobile = CheckMobile()
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local GuiService = game:GetService("GuiService")
local screenResolution = GuiService:GetScreenResolution()
local screenWidth = screenResolution.X
local screenHeight = screenResolution.Y
local windowWidth = screenWidth * 0.6
local windowHeight = screenHeight * 0.6
-- UDim2.fromOffset(500, 200),
if not IsMobile then 
  windowWidth,windowHeight = 500,200
else
  local ClickButton = Instance.new("ScreenGui")
  local MainFrame = Instance.new("Frame")
  local ImageLabel = Instance.new("ImageLabel")
  local TextButton = Instance.new("TextButton") 
  local UICorner = Instance.new("UICorner") 
  local UICorner_2 = Instance.new("UICorner")
  if game.CoreGui:FindFirstChild("ClickButton") then 
      game.CoreGui:FindFirstChild("ClickButton"):Destroy()
  end
  ClickButton.Name = "ClickButton"
  ClickButton.Parent = game.CoreGui
  ClickButton.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
  MainFrame.Name = "MainFrame"
  MainFrame.Parent = ClickButton
  MainFrame.Active = true
  MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
  MainFrame.BackgroundColor3 = Color3.new(1, 1, 1)
  MainFrame.BorderColor3 = Color3.new(0, 0, 0)
  MainFrame.BorderSizePixel = 0
  MainFrame.Transparency = 1
  MainFrame.Position = UDim2.new(0.187441245, 0, 0.476932675, 0)
  MainFrame.Size = UDim2.new(0, 45, 0, 45)
  UICorner.CornerRadius = UDim.new(0, 100)
  UICorner.Parent = MainFrame
  UICorner_2.CornerRadius = UDim.new(0, 100)
  UICorner_2.Parent = ImageLabel
  ImageLabel.Parent = MainFrame
  ImageLabel.AnchorPoint = Vector2.new(0.5, 0.5)
  ImageLabel.BackgroundColor3 = Color3.new(0, 0, 0)
  ImageLabel.BorderColor3 = Color3.new(0, 0, 0)
  ImageLabel.BorderSizePixel = 0
  ImageLabel.Position = UDim2.new(0.48888889, 0, 0.48888889, 0)
  ImageLabel.Size = UDim2.new(0, 45, 0, 45)
  ImageLabel.Image = "rbxassetid://16535029455"
  TextButton.Parent = MainFrame
  TextButton.BackgroundColor3 = Color3.new(1, 1, 1)
  TextButton.BackgroundTransparency = 1
  TextButton.BorderColor3 = Color3.new(0, 0, 0)
  TextButton.BorderSizePixel = 0
  TextButton.Position = UDim2.new(3.3908421e-07, 0, 0, 0)
  TextButton.Size = UDim2.new(0, 45, 0, 45)
  TextButton.AutoButtonColor = false
  TextButton.Font = Enum.Font.SourceSans
  TextButton.Text = "MTX"
  TextButton.TextColor3 = Color3.new(255, 255, 255)
  TextButton.TextSize = 15
  TextButton.MouseButton1Click:Connect(function()
    Fluent.Window:Minimize()
  end)
end  

-- Variables

local runService = game:GetService("RunService")

local workspace = game:GetService("Workspace")

local players = game:GetService("Players")

local localPlayer = players.LocalPlayer

local players = game:GetService("Players")

local LocalPlayer = game:GetService("Players").LocalPlayer

local Balls = game:GetService("Workspace").Balls

local character = localPlayer.Character or localPlayer.CharacterAdded:Wait()

local UserInputService = game:GetService("UserInputService")

local replicatedStorage = game:GetService("ReplicatedStorage")

local upgrades = localPlayer.Upgrades





-- Functions

local function ViewParryArea()
  local BallParry = Instance.new("Part", workspace)
  BallParry.Name = "Parry Range <redz hub>"
  BallParry.Material = "ForceField"
  BallParry.CastShadow = false
  BallParry.CanCollide = false
  BallParry.Anchored = true
  BallParry.BrickColor = BrickColor.new("Really white")
  BallParry.Shape = "Ball"

  local PartFind = workspace:FindFirstChild(BallParry.Name)
  if PartFind and PartFind ~= BallParry then
    PartFind:Destroy()
  end

  local Alive = workspace:WaitForChild("Alive", 9e9)
  local Players = game:GetService("Players")
  local Player = Players.LocalPlayer

  task.spawn(function()
    local Balls = workspace:WaitForChild("Balls", 9e9)
    local function GetBall()
      for _,ball in pairs(Balls:GetChildren()) do
        if ball and ball:GetAttribute("realBall") then
          return ball
        end
      end
    end

    while getgenv().ViewParryArea do task.wait()
      local Ball = GetBall()
      if Ball then
        getgenv().ParryRange = Ball.Velocity.Magnitude * 0.5
      end
    end
  end)

  while getgenv().ViewParryArea do task.wait()
    local plrChar = Player.Character
    local plrPP = plrChar and plrChar.PrimaryPart
    local Range = getgenv().ParryRange

    if tonumber(Range) then
      BallParry.Size = Vector3.new(Range, Range, Range)
      if plrChar and plrChar:FindFirstChild("Highlight") then
        BallParry.BrickColor = BrickColor.new("Really red")
      else
        BallParry.BrickColor = BrickColor.new("Really white")
      end
      if Alive:FindFirstChild(Player.Name) then
        if plrPP then
          BallParry.Position = plrPP.Position
        end
      else
        BallParry.Position = Vector3.new(1000, 1000, 1000)
      end
    end
  end

  if BallParry then
    BallParry:Destroy()
  end
end

--Script
local Toggle = Tabs.P:AddToggle("AutoParry", {Title = "Auto Parry", Default = false })

Toggle:OnChanged(function()
  getgenv().Paws = {
    ["AutoParry"] = true,
    ["PingBased"] = true,
    ["PingBasedOffset"] = 5,
    ["DistanceToParry"] = 0.7,
    ["BallSpeedCheck"] = true,
  }
  
  local Players = game:GetService("Players")
  local Player = Players.LocalPlayer or Players.PlayerAdded:Wait()
  local ReplicatedPaw = game:GetService("ReplicatedStorage")
  
  local Paws = ReplicatedPaw:WaitForChild("Remotes", 9e9)
  local PawsBalls = workspace:WaitForChild("Balls", 9e9)
  local PawsTable = getgenv().Paws
  
  local function IsTheTarget()
    return Player.Character:FindFirstChild("Highlight")
  end
  
  local function FindBall()
  local RealBall
  for i, v in pairs(PawsBalls:GetChildren()) do
    if v:GetAttribute("realBall") == true then
        RealBall = v
    end
  end
  return RealBall
  end
  
  game:GetService("RunService").PreRender:connect(function()
    if not FindBall() then 
            return
    end
    local Ball = FindBall()
    
    local BallPosition = Ball.Position
    
    local BallVelocity = Ball.AssemblyLinearVelocity.Magnitude
    
    local Distance = Player:DistanceFromCharacter(BallPosition)
    
    local Ping = BallVelocity * (game.Stats.Network.ServerStatsItem["Data Ping"]:GetValue() / 1000)
    
    if PawsTable.PingBased then
    Distance -= Ping + PawsTable.PingBasedOffset
    end
    
    if PawsTable.BallSpeedCheck and BallVelocity == 0 then return
    end
    
    if (Distance / BallVelocity) <= PawsTable.DistanceToParry and IsTheTarget() and PawsTable.AutoParry then
           Paws:WaitForChild("ParryButtonPress"):Fire()
       end
  end) 
end)
Tabs.P:AddButton({
  Title = "Auto Spam Parry [In Dev]",
  Description = "Basicamente Um Ultra Spam Parry",
  Callback = function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/MetatronXTryHard/MetatronX/main/AutoSpamMTXClient"))()
  end
})
Tabs.P:AddButton({
  Title = "Clash-Delete",
  Description = "",
  Callback = function()
    while game:GetService("RunService").Heartbeat:wait() do
      local workspaceItems = game.Workspace:GetChildren()
      for i = 1, #workspaceItems do
          local item = workspaceItems[i]
          if item.Name == "clash" then
              item:Destroy()
          end
      end
  end 
  end
})
local Toggle = Tabs.P:AddToggle("Teste", {Title = "Teste", Default = false })

Toggle:OnChanged(function(value)
  getgenv().ViewParryArea = value
  ViewParryArea()
end)
